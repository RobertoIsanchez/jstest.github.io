<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Model Showcase</title>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(180deg, #0a0a0a 0%, #2a2a2a 50%, #4a4a4a 100%);
    }

    #canvas-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
      pointer-events: none;
    }

    /* Logo - Arriba Izquierda */
    .logo-container {
      position: absolute;
      top: 30px;
      left: 40px;
      display: flex;
      align-items: center;
      gap: 12px;
      pointer-events: auto;
    }

    .logo-icon {
      width: 50px;
      height: 50px;
      background: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .logo-text {
      color: #fff;
    }

    .logo-text h1 {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 2px;
    }

    .logo-text p {
      font-size: 10px;
      letter-spacing: 3px;
      opacity: 0.7;
      text-transform: uppercase;
    }

    /* Iconos Software - Arriba Derecha */
    .software-icons {
      position: absolute;
      top: 30px;
      right: 40px;
      display: flex;
      gap: 15px;
      pointer-events: auto;
    }

    .software-icon {
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .software-icon:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .software-icon svg {
      width: 20px;
      height: 20px;
      fill: #fff;
    }

    /* Info T茅cnica - Abajo Izquierda */
    .tech-info {
      position: absolute;
      bottom: 40px;
      left: 40px;
      color: #fff;
      max-width: 350px;
    }

    .model-number {
      font-size: 48px;
      font-weight: 800;
      margin-bottom: 5px;
      background: linear-gradient(90deg, #fff, #888);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .model-name {
      font-size: 14px;
      letter-spacing: 2px;
      text-transform: uppercase;
      opacity: 0.8;
      margin-bottom: 20px;
    }

    .tech-specs {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .spec-row {
      display: flex;
      gap: 20px;
      font-size: 11px;
      opacity: 0.6;
    }

    .spec-label {
      min-width: 80px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .spec-value {
      color: #aaa;
    }

    /* Controles de Animaci贸n */
    .animation-controls {
      margin-top: 25px;
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    .anim-btn {
      width: 36px;
      height: 36px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      pointer-events: auto;
    }

    .anim-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .anim-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
      transform: none;
    }

    .anim-btn svg {
      width: 16px;
      height: 16px;
      fill: #fff;
    }

    .anim-select {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      color: #fff;
      font-size: 11px;
      letter-spacing: 1px;
      cursor: pointer;
      pointer-events: auto;
      min-width: 150px;
    }

    .anim-select:focus {
      outline: none;
      border-color: rgba(255, 255, 255, 0.4);
    }

    .anim-select option {
      background: #1a1a1a;
      color: #fff;
    }

    .anim-status {
      font-size: 10px;
      letter-spacing: 1px;
      opacity: 0.5;
      text-transform: uppercase;
    }

    .no-animations {
      font-size: 10px;
      letter-spacing: 1px;
      opacity: 0.4;
      font-style: italic;
    }

    /* T铆tulo Central Decorativo */
    .background-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 180px;
      font-weight: 900;
      color: rgba(255, 255, 255, 0.03);
      letter-spacing: 20px;
      white-space: nowrap;
      z-index: 0;
      user-select: none;
    }

    /* Loading */
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 14px;
      letter-spacing: 3px;
      text-transform: uppercase;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Controles */
    .controls-hint {
      position: absolute;
      bottom: 40px;
      right: 40px;
      color: rgba(255, 255, 255, 0.4);
      font-size: 11px;
      text-align: right;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
  <div id="canvas-container">
    <div class="loading" id="loading">
      <div class="loading-spinner"></div>
      Cargando modelo...
    </div>
  </div>

  <div class="background-text">OWL</div>

  <div class="overlay">
    <!-- Logo - Arriba Izquierda -->
    <div class="logo-container">
      <div class="logo-icon"></div>
      <div class="logo-text">
        <h1>TU LOGO</h1>
        <p>3D Artist Portfolio</p>
      </div>
    </div>

    <!-- Iconos Software - Arriba Derecha -->
    <div class="software-icons">
      <div class="software-icon" title="Blender">
        <svg viewBox="0 0 60 60"><path d="M19.45,34.6c-.31,1.51,0,3.44.4,4.83.39,1.39.96,2.59,1.67,3.78.71,1.19,1.38,2.11,2.34,3.11s1.84,1.75,2.97,2.53c1.12.78,2.23,1.36,3.54,1.91,1.31.55,2.74.98,4.21,1.24,1.47.26,3.56.4,5.1.31,1.54-.1,3.22-.42,4.62-.84,1.4-.42,2.63-.93,3.86-1.59s2.2-1.36,3.25-2.24c1.05-.88,1.83-1.71,2.66-2.79.83-1.08,1.46-2.12,2.04-3.41.59-1.29,1-2.79,1.24-4.25s.21-3.6-.04-5.05c-.25-1.45-.71-2.87-1.3-4.15-.59-1.27-1.26-2.34-2.09-3.4-.83-1.06-1.68-1.91-2.7-2.75-1.03-.83-2.04-1.57-3.08-2.37-1.03-.8-2.07-1.59-3.1-2.39-1.03-.8-2.05-1.57-3.1-2.35-1.04-.79-2.01-1.61-3.08-2.37-1.07-.76-1.99-1.66-3.1-2.4-1.11-.73-1.92-1.84-3.28-2.17-1.35-.34-3.06-.06-3.93,1.27-.87,1.33.42,2.65,1.52,3.38s1.95,1.68,3.01,2.44c1.06.76,1.94,1.7,3,2.45-1.45.09-2.99.03-4.48.04s-3.04-.01-4.53,0-3.07-.01-4.53,0-3.08-.03-4.48,0-3.17-.1-4.44.09c-1.26.19-2.09.75-2.8,1.73-.71.98-.62,2.38.44,3.14,1.06.76,2.56.58,3.94.58s3.1,0,4.53,0,3.03-.04,4.44.04c-1.69,1.22-3.34,2.52-5,3.79-1.66,1.27-3.29,2.51-4.97,3.78-1.67,1.27-3.28,2.55-4.97,3.82-1.69,1.28-3.25,2.49-4.97,3.78-1.72,1.29-2.63,4.37-.55,5.8,2.08,1.43,4.52.02,6.11-1.43s3.23-2.58,4.84-3.96c1.6-1.38,3.19-2.6,4.8-3.95M38.96,22.87c1.92.19,4.08.65,5.72,1.67,1.63,1.02,2.76,2,3.81,3.62,1.05,1.62,1.68,3.85,1.55,5.84s-.84,3.86-2.02,5.41c-1.18,1.55-2.36,2.43-4.06,3.33-1.7.89-4.15,1.38-6.14,1.28s-4.07-.68-5.72-1.67c-1.65-.98-2.75-2.03-3.81-3.62-1.06-1.59-1.67-3.87-1.53-5.82.14-1.95.83-3.9,2.02-5.41,1.19-1.51,2.33-2.51,4.04-3.34,1.71-.84,4.12-1.48,6.14-1.29Z"/><path d="M37.95,39.66h.92c3.29,0,6.95-2.85,6.95-6.33v-.75c0-2.17-1.39-3.98-3.16-5.19-1.78-1.21-4.71-1.51-6.74-.8-2.03.71-3.51,1.93-4.41,3.9-.91,1.97-.53,4.77.9,6.42,1.43,1.64,3.39,2.76,5.55,2.76Z"/></svg>
      </div>
      <div class="software-icon" title="Substance Painter">
        <svg viewBox="0 0 60 60"><circle cx="26.93" cy="8.09" r="3.28"/><circle cx="50.99" cy="50.02" r="5.17"/><circle cx="6.12" cy="50.02" r="2.28"/><path d="M26.91,14.84c-11.06,0-20.01,8.95-20.01,20.01s8.95,20.01,20.01,20.01,20.01-8.95,20.01-20.01-8.95-20.01-20.01-20.01h0ZM13.36,27.08l13.52-7.81,13.48,7.81v7.06l-6.21-2v-1.46l-7.28-4.21-5.35,3.1,18.83,6.03v7.06l-13.52,7.81-13.52-7.78v-7.1l6.24,1.96v1.46l7.28,4.21,5.42-3.14-18.91-5.99v-7.03Z"/></svg>
      </div>
      <div class="software-icon" title="Adobe Photoshop">
        <svg viewBox="0 0 60 60"><path d="M23.57,21.41c-1.01,0-1.7.1-2.06.2v6.51c.43.1.95.13,1.66.13,2.65,0,4.28-1.34,4.28-3.6,0-2.02-1.41-3.24-3.89-3.24Z"/><path d="M47.55,10H12.45c-1.35,0-2.45,1.09-2.45,2.44v35.1c0,1.35,1.1,2.45,2.45,2.45h35.1c1.35,0,2.45-1.1,2.45-2.45V12.45c0-1.35-1.1-2.45-2.45-2.45ZM30.37,29.75c-1.7,1.6-4.22,2.32-7.16,2.32-.66,0-1.24-.03-1.7-.1v7.88h-4.94v-21.74c1.54-.26,3.69-.46,6.74-.46s5.26.59,6.73,1.77c1.41,1.11,2.36,2.94,2.36,5.1s-.72,3.98-2.03,5.23ZM37.81,40.18c-2.1,0-3.96-.45-5.17-1.11l.88-3.56c.92.55,2.81,1.21,4.29,1.21s2.12-.52,2.12-1.34-.49-1.21-2.35-1.83c-3.3-1.11-4.58-2.91-4.55-4.81,0-2.97,2.55-5.23,6.51-5.23,1.86,0,3.53.43,4.51.92l-.88,3.43c-.72-.39-2.09-.91-3.47-.91-1.21,0-1.89.49-1.89,1.31,0,.75.62,1.14,2.58,1.83,3.04,1.04,4.32,2.58,4.35,4.93,0,2.98-2.36,5.17-6.93,5.17Z"/></svg>
      </div>
    </div>

    <!-- Info T茅cnica - Abajo Izquierda -->
    <div class="tech-info">
      <div class="model-number">#01</div>
      <div class="model-name">OWL</div>
      
      <div class="tech-specs">
        <div class="spec-row">
          <span class="spec-label">Pol铆gonos</span>
          <span class="spec-value">45,000 tris</span>
        </div>
        <div class="spec-row">
          <span class="spec-label">Texturas</span>
          <span class="spec-value">4K PBR</span>
        </div>
        <div class="spec-row">
          <span class="spec-label">Software</span>
          <span class="spec-value">Blender, Substance Painter</span>
        </div>
        <div class="spec-row">
          <span class="spec-label">Tiempo</span>
          <span class="spec-value">~40 horas</span>
        </div>
      </div>

      <!-- Controles de Animaci贸n -->
      <div class="animation-controls" id="animation-controls">
        <span class="no-animations" id="no-anim-msg">Sin animaciones</span>
      </div>
    </div>

    <!-- Controles -->
    <div class="controls-hint">
      Arrastra para rotar<br>
      Scroll para zoom
    </div>
  </div>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

    // Setup
    const container = document.getElementById('canvas-container');
    const loading = document.getElementById('loading');
    const animControls = document.getElementById('animation-controls');
    const noAnimMsg = document.getElementById('no-anim-msg');

    // Scene
    const scene = new THREE.Scene();

    // Camera
    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 1, 5);

    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.outputColorSpace = THREE.SRGBColorSpace;
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1;
    container.appendChild(renderer.domElement);

    // Controls
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.minDistance = 2;
    controls.maxDistance = 10;
    controls.target.set(0, 0.5, 0);

    // Lights
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);

    const mainLight = new THREE.DirectionalLight(0xffffff, 1.5);
    mainLight.position.set(5, 10, 7);
    mainLight.castShadow = true;
    scene.add(mainLight);

    const fillLight = new THREE.DirectionalLight(0x8888ff, 0.5);
    fillLight.position.set(-5, 5, -5);
    scene.add(fillLight);

    const rimLight = new THREE.DirectionalLight(0xffffff, 0.8);
    rimLight.position.set(0, 5, -10);
    scene.add(rimLight);

    let mixer = null;
    let animations = [];
    let currentAction = null;
    let isPlaying = true;
    const clock = new THREE.Clock();

    function createAnimationControls(clips) {
      animControls.innerHTML = '';
      
      if (clips.length === 0) {
        animControls.innerHTML = '<span class="no-animations">Sin animaciones</span>';
        return;
      }

      // Bot贸n Play/Pause
      const playBtn = document.createElement('button');
      playBtn.className = 'anim-btn';
      playBtn.id = 'play-btn';
      playBtn.title = 'Reproducir/Pausar';
      playBtn.innerHTML = `
        <svg viewBox="0 0 24 24" id="play-icon">
          <path d="M6 4l12 8-12 8V4z"/>
        </svg>
        <svg viewBox="0 0 24 24" id="pause-icon" style="display:none;">
          <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
        </svg>
      `;
      
      // Bot贸n Stop
      const stopBtn = document.createElement('button');
      stopBtn.className = 'anim-btn';
      stopBtn.title = 'Detener';
      stopBtn.innerHTML = `<svg viewBox="0 0 24 24"><rect x="6" y="6" width="12" height="12"/></svg>`;

      // Selector de animaciones
      const select = document.createElement('select');
      select.className = 'anim-select';
      select.id = 'anim-select';
      
      clips.forEach((clip, index) => {
        const option = document.createElement('option');
        option.value = index;
        option.textContent = clip.name || `Animaci贸n ${index + 1}`;
        select.appendChild(option);
      });

      // Estado
      const status = document.createElement('span');
      status.className = 'anim-status';
      status.id = 'anim-status';
      status.textContent = 'Reproduciendo';

      animControls.appendChild(playBtn);
      animControls.appendChild(stopBtn);
      animControls.appendChild(select);
      animControls.appendChild(status);

      // Event listeners
      playBtn.addEventListener('click', togglePlay);
      stopBtn.addEventListener('click', stopAnimation);
      select.addEventListener('change', (e) => playAnimation(parseInt(e.target.value)));

      // Reproducir primera animaci贸n
      playAnimation(0);
      updatePlayButton();
    }

    function playAnimation(index) {
      if (!mixer || !animations[index]) return;

      if (currentAction) {
        currentAction.fadeOut(0.3);
      }

      currentAction = mixer.clipAction(animations[index]);
      currentAction.reset();
      currentAction.fadeIn(0.3);
      currentAction.play();
      
      isPlaying = true;
      updatePlayButton();
      updateStatus('Reproduciendo');
    }

    function togglePlay() {
      if (!currentAction) return;

      if (isPlaying) {
        currentAction.paused = true;
        isPlaying = false;
        updateStatus('Pausado');
      } else {
        currentAction.paused = false;
        isPlaying = true;
        updateStatus('Reproduciendo');
      }
      updatePlayButton();
    }

    function stopAnimation() {
      if (!currentAction) return;

      currentAction.stop();
      currentAction.reset();
      isPlaying = false;
      updatePlayButton();
      updateStatus('Detenido');
    }

    function updatePlayButton() {
      const playIcon = document.getElementById('play-icon');
      const pauseIcon = document.getElementById('pause-icon');
      if (playIcon && pauseIcon) {
        playIcon.style.display = isPlaying ? 'none' : 'block';
        pauseIcon.style.display = isPlaying ? 'block' : 'none';
      }
    }

    function updateStatus(text) {
      const status = document.getElementById('anim-status');
      if (status) status.textContent = text;
    }

    // Load GLB Model
    const loader = new GLTFLoader();
    
    loader.load(
      'owl.glb',
      (gltf) => {
        const model = gltf.scene;
        
        // Centrar y escalar el modelo
        const box = new THREE.Box3().setFromObject(model);
        const center = box.getCenter(new THREE.Vector3());
        const size = box.getSize(new THREE.Vector3());
        
        const maxDim = Math.max(size.x, size.y, size.z);
        const scale = 2 / maxDim;
        model.scale.multiplyScalar(scale);
        
        model.position.x = -center.x * scale;
        model.position.y = -center.y * scale + 0.5;
        model.position.z = -center.z * scale;
        
        scene.add(model);
        loading.style.display = 'none';

        animations = gltf.animations;
        if (animations && animations.length > 0) {
          mixer = new THREE.AnimationMixer(model);
          createAnimationControls(animations);
        }
      },
      (progress) => {
        const percent = (progress.loaded / progress.total * 100).toFixed(0);
        loading.innerHTML = `<div class="loading-spinner"></div>Cargando... ${percent}%`;
      },
      (error) => {
        console.error('Error cargando modelo:', error);
        loading.innerHTML = 'Error al cargar el modelo<br><small>Aseg煤rate de usar un archivo .glb v谩lido</small>';
      }
    );

    function animate() {
      requestAnimationFrame(animate);
      
      const delta = clock.getDelta();
      if (mixer) mixer.update(delta);
      
      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // Resize handler
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
